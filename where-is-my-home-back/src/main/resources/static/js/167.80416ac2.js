"use strict";(self["webpackChunkwhere_is_my_home_front"]=self["webpackChunkwhere_is_my_home_front"]||[]).push([[167],{167:function(t,e,o){o.r(e),o.d(e,{default:function(){return h}});var n=function(){var t=this,e=t._self._c;return e("b-container",{staticClass:"bv-example-row mt-3"},[e("b-row",{staticClass:"mb-1"},[e("b-col",{staticClass:"text-left"},[e("b-button",{attrs:{variant:"outline-primary"},on:{click:t.moveList}},[t._v("목록")])],1),t.loginUserId===t.article.userId?e("b-col",{staticClass:"text-right"},[e("b-button",{staticClass:"mr-2",attrs:{variant:"outline-info",size:"sm"},on:{click:t.moveModifyArticle}},[t._v("글수정")]),e("b-button",{attrs:{variant:"outline-danger",size:"sm"},on:{click:t.deleteArticle}},[t._v("글삭제")])],1):t._e()],1),e("b-row",{staticClass:"mb-1"},[e("b-col",[e("b-card",{staticClass:"mb-2",attrs:{"header-html":`<h4>${t.article.id}.\n            ${t.article.title}</h4><div><h6>작성자: ${t.article.nickname} | 조회수: ${t.article.hit}</div><div>수정일: ${t.article.updatedAt}</h6></div>`,"border-variant":"dark","no-body":""}},[e("b-card-body",{staticClass:"text-left"},[e("div",{domProps:{innerHTML:t._s(t.message)}})])],1)],1)],1),e("div",{staticClass:"card mb-2"},[e("div",{staticClass:"card-header bg-light"},[e("i",{staticClass:"fa fa-comment fa"}),t._v(" REPLY")]),e("div",{staticClass:"card-body"},[e("b-row",[e("b-col",{attrs:{cols:"10"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],staticClass:"form-control",attrs:{id:"exampleFormControlTextarea1",rows:"1"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}})]),e("b-col",{attrs:{cols:"2"}},[e("b-button",{attrs:{variant:"primary"},on:{click:t.onAddComment}},[t._v("댓글추가")])],1)],1),e("br"),t._l(t.comments,(function(o,n){return e("b-row",{key:n,attrs:{"align-v":"center"}},[!1===o.isDeleted?e("div",[e("b-col",{attrs:{"align-self":"start",cols:"10"}},[e("b-card",[e("b-col",{attrs:{cols:"2"}},[e("h5",[t._v(t._s(o.nickname))])]),e("b-col",{attrs:{cols:"10"}},[e("b-card",{attrs:{"bg-variant":"Light","text-variant":"black"}},[e("b-card-text",[t._v(t._s(o.content))])],1)],1)],1),t.loginUserId===o.userId?e("b-col",{attrs:{cols:"2"}},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.comment-modify-modal",modifiers:{"comment-modify-modal":!0}}],attrs:{variant:"warning"},on:{click:function(e){return t.passDataToModal(o.id)}}},[t._v("수정")]),e("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onDeleteComment(o.id)}}},[t._v("삭제")])],1):e("b-col",{attrs:{cols:"2"}}),e("br")],1)],1):e("div",[e("b-card",{staticClass:"text-center",attrs:{"bg-variant":"secondary","text-variant":"white"}},[e("b-card-text",[t._v("삭제된 메세지입니다.")])],1),e("br")],1)])}))],2)]),e("b-modal",{attrs:{id:"comment-modify-modal"},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" 댓글 수정 입력창 ")]},proxy:!0}])},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.modifyCommentContent,expression:"modifyCommentContent"}],attrs:{type:"text"},domProps:{value:t.modifyCommentContent},on:{input:function(e){e.target.composing||(t.modifyCommentContent=e.target.value)}}}),e("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.onCommentModify(t.modifyCommentContent)}}},[t._v("수정완료")])],1)],1)},s=[],a=(o(7658),o(408)),r=o(6441),i=o(6865);const c="userStore";var l={name:"BoardDetail",data(){return{articleNickname:"",loginUserId:-1,article:{},commentContent:"",comments:[],modifyCommentId:-1,modifyCommentContent:""}},computed:{...(0,a.rn)(c,["userInfo"]),message(){return this.article.content?this.article.content.split("\n").join("<br>"):""}},created(){let t=this.$route.params.id,e=sessionStorage.getItem("access-token"),o=(0,i.Z)(e);this.loginUserId=parseInt(o.aud),(0,r.fq)(t,(({data:t})=>{console.log(t),this.article=t,console.log(">>>>>>>>>>>"),console.log(this.article)}),(async e=>{console.log(e),400===e.response.status?alert("잘못된 접근입니다."):401===e.response.status&&(console.log("글 상세보기: 권한이 없습니다.. 토큰 재발행으로 go"),await this.tokenRegeneration(),(0,r.fq)(t,(({data:t})=>{this.article=t,console.log(t)}),(t=>{console.log(t),400===t.response.status?alert("잘못된 접근입니다."):401===t.response.status&&(alert("인증이 만료되었습니다. 다시 로그인 해 주세요"),this.userLogout())})))})),this.getCommentList()},methods:{...(0,a.nv)(c,["tokenRegeneration","userLogout"]),moveModifyArticle(){this.$router.replace({name:"boardmodify",params:{id:this.article.id}})},deleteArticle(){confirm("정말로 삭제?")&&this.$router.replace({name:"boarddelete",params:{id:this.article.id}})},getCommentList(){let t=this.$route.params.id;(0,r.li)(t,(({data:t})=>{this.comments=t}),(t=>{console.log(t)}))},moveList(){this.$router.push({name:"boardlist"})},onAddComment(){let t={postId:this.$route.params.id,content:this.commentContent};""!==this.commentContent?confirm("등록 하시겠습니까?")&&(0,r.Ir)(t,(t=>{let e="댓글 등록 처리시 문제가 발생했습니다.";200===t.status&&(e="등록이 완료되었습니다.",this.commentContent=""),alert(e),this.getCommentList()}),(async e=>{console.log(e),400===e.response.status?alert("잘못된 접근입니다."):401===e.response.status&&(console.log("댓글 추가: 권한이 없습니다.. 토큰 재발행으로 go"),await this.tokenRegeneration(),(0,r.Ir)(t,(t=>{let e="댓글 등록 처리시 문제가 발생했습니다.";200===t.status&&(e="등록이 완료되었습니다.",this.commentContent=""),alert(e),this.getCommentList()}),(t=>{console.log(t),400===t.response.status?alert("잘못된 접근입니다."):401===t.response.status&&(alert("인증이 만료되었습니다. 다시 로그인 해 주세요"),this.userLogout())})))})):alert("댓글 내용을 입력하세요!")},onDeleteComment(t){let e=t;confirm("삭제 하시겠습니까?")&&(0,r.YF)(e,(t=>{let e="댓글 삭제 처리시 문제가 발생했습니다.";200===t.status&&(e="댓글 삭제가 완료되었습니다."),alert(e),this.getCommentList()}),(async t=>{console.log(t),400===t.response.status?alert("잘못된 접근입니다."):401===t.response.status&&(console.log("댓글 삭제: 권한이 없습니다.. 토큰 재발행으로 go"),await this.tokenRegeneration(),(0,r.YF)(e,(t=>{let e="댓글 삭제 처리시 문제가 발생했습니다.";200===t.status&&(e="댓글 삭제가 완료되었습니다."),alert(e),this.getCommentList()}),(t=>{console.log(t),400===t.response.status?alert("잘못된 접근입니다."):401===t.response.status&&(alert("인증이 만료되었습니다. 다시 로그인 해 주세요"),this.userLogout())})))}))},onCommentModify(t){let e={id:this.modifyCommentId,content:t};""!==t?confirm("수정 하시겠습니까?")&&(0,r.p5)(e,(t=>{this.modifyCommentId=-1,this.$bvModal.hide("comment-modify-modal");let e="댓글 수정 처리시 문제가 발생했습니다.";200===t.status&&(e="댓글 수정이 완료되었습니다."),alert(e),this.getCommentList()}),(async t=>{console.log(t),400===t.response.status?alert("잘못된 접근입니다."):401===t.response.status&&(console.log("댓글 수정: 권한이 없습니다.. 토큰 재발행으로 go"),await this.tokenRegeneration(),(0,r.p5)(e,(t=>{this.modifyCommentId=-1,this.$bvModal.hide("comment-modify-modal");let e="댓글 수정 처리시 문제가 발생했습니다.";200===t.status&&(e="댓글 수정이 완료되었습니다."),alert(e),this.getCommentList()}),(t=>{console.log(t),400===t.response.status?alert("잘못된 접근입니다."):401===t.response.status&&(alert("인증이 만료되었습니다. 다시 로그인 해 주세요"),this.userLogout())})))})):alert("댓글 내용을 입력하세요!")},passDataToModal(t){this.modifyCommentId=t}}},m=l,d=o(1001),u=(0,d.Z)(m,n,s,!1,null,null,null),h=u.exports},6441:function(t,e,o){o.d(e,{D9:function(){return m},Ir:function(){return d},YF:function(){return h},cn:function(){return c},fq:function(){return i},hY:function(){return r},jC:function(){return a},jX:function(){return l},li:function(){return u},p5:function(){return f}});var n=o(2243);const s=(0,n.b)();function a(t,e,o){s.get("/board",{params:t}).then(e).catch(o)}function r(t,e,o){s.defaults.headers["Authorization"]="Bearer "+sessionStorage.getItem("access-token"),s.post("/board/write",JSON.stringify(t)).then(e).catch(o)}function i(t,e,o){s.defaults.headers["Authorization"]="Bearer "+sessionStorage.getItem("access-token"),s.get(`/board/${t}`).then(e).catch(o)}function c(t,e,o){s.defaults.headers["Authorization"]="Bearer "+sessionStorage.getItem("access-token"),s.put("/board",JSON.stringify(t)).then(e).catch(o)}function l(t,e,o){s.defaults.headers["Authorization"]="Bearer "+sessionStorage.getItem("access-token"),s.delete(`/board/${t}`).then(e).catch(o)}function m(t,e,o){s.get("/board/length",{params:t}).then(e).catch(o)}function d(t,e,o){s.defaults.headers["Authorization"]="Bearer "+sessionStorage.getItem("access-token"),s.post("/board/comment",JSON.stringify(t)).then(e).catch(o)}function u(t,e,o){s.get(`/board/${t}/comment`).then(e).catch(o)}function h(t,e,o){s.defaults.headers["Authorization"]="Bearer "+sessionStorage.getItem("access-token"),s.delete(`/board/comment/${t}`).then(e).catch(o)}function f(t,e,o){s.defaults.headers["Authorization"]="Bearer "+sessionStorage.getItem("access-token"),s.put("/board/comment",JSON.stringify(t)).then(e).catch(o)}}}]);
//# sourceMappingURL=167.80416ac2.js.map